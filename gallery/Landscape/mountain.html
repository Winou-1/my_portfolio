<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Effet de Zoom et Texte qui défile</title>

    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="mountain.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* Loading Screen Styles */
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            transition: opacity 0.8s ease-out, visibility 0.8s ease-out;
        }

        #loadingScreen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-container {
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .loading-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 2rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .loading-bar-container {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #a855f7);
            border-radius: 2px;
            width: 0%;
            transition: width 0.3s ease-out;
            position: relative;
            overflow: hidden;
        }

        .loading-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .loading-percentage {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: #a1a1aa;
            margin-bottom: 1rem;
        }

        .loading-text {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            color: #71717a;
            letter-spacing: 1px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Floating particles animation */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(147, 51, 234, 0.6);
            border-radius: 50%;
            animation: float 6s infinite ease-in-out;
        }

        .particle:nth-child(1) { left: 10%; animation-delay: 0s; }
        .particle:nth-child(2) { left: 20%; animation-delay: 1s; }
        .particle:nth-child(3) { left: 30%; animation-delay: 2s; }
        .particle:nth-child(4) { left: 40%; animation-delay: 3s; }
        .particle:nth-child(5) { left: 50%; animation-delay: 4s; }
        .particle:nth-child(6) { left: 60%; animation-delay: 5s; }
        .particle:nth-child(7) { left: 70%; animation-delay: 0.5s; }
        .particle:nth-child(8) { left: 80%; animation-delay: 1.5s; }
        .particle:nth-child(9) { left: 90%; animation-delay: 2.5s; }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            50% { 
                transform: translateY(-100px) rotate(180deg);
                opacity: 1;
            }
            90% { opacity: 1; }
        }
    </style>
</head>

<body class="bg-zinc-900 overflow-x-hidden">
    <!-- Loading Screen -->
    <div id="loadingScreen">
        <!-- Floating particles -->
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        
        <div class="loading-container">
            <h1 class="loading-title">Montagne</h1>
            <div class="loading-bar-container">
                <div class="loading-bar" id="loadingBar"></div>
            </div>
            <div class="loading-percentage" id="loadingPercentage">0%</div>
            <div class="loading-text">Chargement des images...</div>
        </div>
    </div>

    <div class="header finisher-header" style="width: 100%;">
        <div id="overlay" class=""></div>
                <nav class="navbar">
            <div class="navbar-container">
                <a href="../../index.html" class ="navbar-logo">Pictures</a>
                <button class="navbar-toggle">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                    <ul class="navbar-menu">
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="#">Cars</a></li>
                        <li><a href="../../landscape.html"class="active">Landscape</a></li>
                        <li><a href="#">Shooting</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </nav>
        <div>
            <div>
                <div id="pin-container" class="relative h-[150vh]">
                    <div id="zoom-effect-wrapper" class="h-screen w-full relative overflow-hidden flex items-center justify-center">
                        <div id="background-image" class="absolute inset-0 z-0">
                            <img src="../../img/template/rond/rond_test_1.png" alt="Background" class="w-full h-full object-contain image-centered">
                        </div>
                        <div class="relative z-10 h-screen flex flex-col items-center justify-center text-center">
                            <h1 id="main-text" class="text-7xl md:text-8xl lg:text-9xl font-bold uppercase tracking-wide leading-none text-stroke">
                                Montagne
                            </h1>
                            <p class="text-white text-xl md:text-2xl mt-4">
                                A Journey Through the Lands
                            </p>
                        </div>
                    </div>
                </div>
            
                <section id="drag-cards-section" class="relative min-h-screen w-full grid place-content-center overflow-hidden bg-neutral-950">
                    <h2 class="drag-cards-title">Picture<span class="text-indigo-500">.</span></h2>
                  <div class="drag-cards-container">
                    <div class="drag-card w-36 md:w-56" data-rotate="6deg" data-top="20%" data-left="25%">
                      <img src="../../img/paysages/compressed/_DSC0445_comp.avif" alt="Carte 1" />
                    </div>
                    <div class="drag-card w-24 md:w-48" data-rotate="12deg" data-top="45%" data-left="60%">
                      <img src="../../img/paysages/compressed/_DSC0149_comp.avif" alt="Carte 2" />
                    </div>
                    <div class="drag-card w-52 md:w-80" data-rotate="-6deg" data-top="20%" data-left="40%">
                      <img src="../../img/paysages/compressed/_DSC8514_comp.avif" alt="Carte 3" />
                    </div>
                    <div class="drag-card w-48 md:w-72" data-rotate="8deg" data-top="50%" data-left="25%">
                      <img src="../../img/paysages/compressed/_DSC3837_comp.avif" alt="Carte 4" />
                    </div>
                    <div class="drag-card w-40 md:w-64" data-rotate="18deg" data-top="20%" data-left="65%">
                      <img src="../../img/paysages/compressed/1666992433060_comp.avif" alt="Carte 5" />
                    </div>
                    <div class="drag-card w-24 md:w-48" data-rotate="-3deg" data-top="35%" data-left="55%">
                      <img src="../../img/paysages/compressed/1644876360168_comp.avif" alt="Carte 6" />
                    </div>
                  </div>
                </section>
                <div class = "image-centrale">
                    <img src="../../img/paysages/compressed/_DSC9931_comp.avif" alt="Artistic image 1">
                </div>
                <main>
                  <h2 class="title">La Galerie</h2>
                  <div class="image-container">
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3900-Panorama_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC9992-Panorama-2_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0213_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC9892_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0376-Panorama_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0222_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0288_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666725488552_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666725488387_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1646119561536_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1644871612465_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0285_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0102_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666725488652_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666725488586_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666725488620_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0276_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666728002144_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0179_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3665-Panorama-2_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0054_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3854_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666725488452_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666992432978_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666725488485_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/DSC07095_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0299_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0463_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0394_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666728002215_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1644875641263_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC9931_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666725488519_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3852_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/DSC07161_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8534_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/DSC07133_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0126_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666992433060_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8648_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0467_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0371_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC9980 (1)_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0445_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3864_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC4036_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1644875622547_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8549_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0253_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0149_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0198_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3942_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3863_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/IMG_20240406_122004_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1666903369985_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3845_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1644876178587_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8688_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8586_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0450_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC0182_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8654_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3866_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/IMG_20240418_124603_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3837_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3324_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8685_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8694_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8700_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8702_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3759_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8577_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/DSC07115_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3964_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/IMG_20221024_205127_172_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8514_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC9957_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC3939_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/IMG_20240105_130502_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/IMG_20250607_205604_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8678_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/1644876360168_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      <div class="image-wrapper" data-src="../../img/paysages/compressed/montagne/_DSC8523_comp.avif">
                          <canvas class="gallery-image-canvas"></canvas>
                      </div>
                      

                      
                  </div>
                </main>

                <div id="galleryModal" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-90 flex justify-center items-center z-[10000] hidden">
                    <canvas id="modalCanvas" class="w-full h-full object-contain transition-all duration-300"></canvas>
                    <button class="close-button absolute top-10 right-10 text-white text-4xl cursor-pointer p-2">
                        &times;
                    </button>
                    <div class="prev-arrow absolute top-1/2 left-4 text-white text-5xl cursor-pointer p-4 select-none">
                        &#10094;
                    </div>
                    <div class="next-arrow absolute top-1/2 right-4 text-white text-5xl cursor-pointer p-4 select-none">
                        &#10095;
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/ScrollTrigger.min.js"></script>
    
    <script>
        // Loading Screen Logic
        class LoadingManager {
            constructor() {
                this.loadingBar = document.getElementById('loadingBar');
                this.loadingPercentage = document.getElementById('loadingPercentage');
                this.loadingScreen = document.getElementById('loadingScreen');
                this.progress = 0;
                this.targetProgress = 0;
                this.animationId = null;
                this.imagesToLoad = [];
                this.imagesLoaded = 0;
                this.totalImages = 0;
                this.isComplete = false;
                
                this.init();
            }
            
            init() {
                // Collect all images to preload
                this.collectImages();
                
                // Start animation loop
                this.animateProgress();
                
                // Start preloading images immediately
                this.preloadImages();
                
                // Listen for other resources
                this.listenForResources();
            }
            
            collectImages() {
                // Collect main images with src attribute
                const mainImages = document.querySelectorAll('img[src]');
                mainImages.forEach(img => {
                    if (img.src && !img.src.includes('data:') && !img.src.includes('blob:')) {
                        this.imagesToLoad.push(img.src);
                    }
                });
                
                // Collect gallery images from data-src attributes
                const galleryWrappers = document.querySelectorAll('[data-src]');
                galleryWrappers.forEach(wrapper => {
                    if (wrapper.dataset.src) {
                        this.imagesToLoad.push(wrapper.dataset.src);
                    }
                });
                
                // Remove duplicates
                this.imagesToLoad = [...new Set(this.imagesToLoad)];
                this.totalImages = this.imagesToLoad.length;
                
                console.log(`Found ${this.totalImages} images to load`);
                
                // If no images, complete immediately
                if (this.totalImages === 0) {
                    setTimeout(() => this.completeLoading(), 1000);
                }
            }
            
            preloadImages() {
                if (this.totalImages === 0) return;
                
                let loadedCount = 0;
                
                this.imagesToLoad.forEach((src, index) => {
                    const img = new Image();
                    
                    const onImageComplete = () => {
                        loadedCount++;
                        this.imagesLoaded = loadedCount;
                        
                        // Calculate progress: 10% for initial setup, 90% for images
                        const imageProgress = (loadedCount / this.totalImages) * 90;
                        this.targetProgress = 10 + imageProgress;
                        
                        console.log(`Loaded ${loadedCount}/${this.totalImages} images (${Math.floor(this.targetProgress)}%)`);
                        
                        // Only complete when ALL images are loaded
                        if (loadedCount === this.totalImages) {
                            console.log('All images loaded, completing...');
                            this.completeLoading();
                        }
                    };
                    
                    img.onload = onImageComplete;
                    img.onerror = (e) => {
                        console.warn(`Failed to load image: ${src}`);
                        onImageComplete(); // Continue even if image fails to load
                    };
                    
                    // Start loading immediately, but with small delays for visual effect
                    setTimeout(() => {
                        img.src = src;
                    }, index * 30);
                });
                
                // Set initial progress
                this.targetProgress = 10;
            }
            
            listenForResources() {
                // Small initial progress for DOM ready
                document.addEventListener('DOMContentLoaded', () => {
                    if (this.targetProgress < 5) {
                        this.targetProgress = 5;
                    }
                });
            }
            
            animateProgress() {
                const animate = () => {
                    // Smooth progress animation with easing
                    const diff = this.targetProgress - this.progress;
                    this.progress += diff * 0.08; // Slower animation for smoother feel
                    
                    if (Math.abs(diff) < 0.1) {
                        this.progress = this.targetProgress;
                    }
                    
                    this.updateProgressBar();
                    
                    // Continue animation until complete
                    if (!this.isComplete || this.progress < 100) {
                        this.animationId = requestAnimationFrame(animate);
                    }
                };
                
                animate();
            }
            
            updateProgressBar() {
                const roundedProgress = Math.floor(this.progress);
                this.loadingBar.style.width = `${roundedProgress}%`;
                this.loadingPercentage.textContent = `${roundedProgress}%`;
                
                // Update loading text based on progress
                const loadingText = document.querySelector('.loading-text');
                if (roundedProgress < 10) {
                    loadingText.textContent = 'Initialisation...';
                } else if (roundedProgress < 100) {
                    loadingText.textContent = `Chargement des images... ${this.imagesLoaded}/${this.totalImages}`;
                } else {
                    loadingText.textContent = 'Chargement terminé !';
                }
            }
            
            completeLoading() {
                if (this.isComplete) return; // Prevent multiple calls
                
                this.isComplete = true;
                this.targetProgress = 100;
                
                // Wait for progress bar to reach 100% before hiding
                const waitForComplete = () => {
                    if (this.progress >= 99.5) {
                        setTimeout(() => {
                            this.hideLoadingScreen();
                        }, 500); // Small delay to show 100%
                    } else {
                        requestAnimationFrame(waitForComplete);
                    }
                };
                
                waitForComplete();
            }
            
            hideLoadingScreen() {
                this.loadingScreen.classList.add('hidden');
                
                // Remove loading screen from DOM after transition
                setTimeout(() => {
                    if (this.loadingScreen.parentNode) {
                        this.loadingScreen.parentNode.removeChild(this.loadingScreen);
                    }
                }, 800);
                
                // Initialize main page animations
                this.initMainPage();
            }
            
            initMainPage() {
                // Initialize your existing JavaScript here
                // This replaces the DOMContentLoaded event
                initMountainPage();
            }
        }
        
        // Initialize loading manager
        const loadingManager = new LoadingManager();
        
        // Main page initialization function
        function initMountainPage() {
            gsap.registerPlugin(ScrollTrigger);

            // Your existing JavaScript code goes here
            // Zoom effect
            let pinContainer = document.getElementById('pin-container');
            let image = document.getElementById('background-image');
            let mainText = document.getElementById('main-text');

            gsap.to(image, {
                scale: 5,
                ease: 'none',
                scrollTrigger: {
                    trigger: pinContainer,
                    start: 'top top',
                    end: 'bottom top',
                    scrub: true,
                    pin: true,
                },
            });

            gsap.to(mainText, {
                y: -300,
                opacity: 0,
                ease: 'none',
                scrollTrigger: {
                    trigger: pinContainer,
                    start: 'top top+=100',
                    end: 'bottom bottom',
                    scrub: true,
                },
            });

            // Drag cards initialization
            const container = document.querySelector(".drag-cards-container");
            const cards = document.querySelectorAll(".drag-card");
            let maxZIndex = 1;

            function initializeCards() {
                cards.forEach((card) => {
                    const top = card.getAttribute("data-top");
                    const left = card.getAttribute("data-left");
                    const rotate = card.getAttribute("data-rotate");

                    card.style.top = top;
                    card.style.left = left;
                    card.style.transform = `rotate(${rotate}) scale(0.8)`;
                    card.style.opacity = 0;
                });
            }

            function animateOnScroll() {
                cards.forEach((card) => {
                    gsap.to(card, {
                        opacity: 1,
                        scale: 1,
                        duration: 1,
                        ease: "power3.out",
                        scrollTrigger: {
                            trigger: card,
                            start: "top 80%",
                            toggleActions: "play none none none"
                        }
                    });
                });
            }
            
            setTimeout(() => {
                initializeCards();
                animateOnScroll();
            }, 100);

            // Drag functionality for cards
            cards.forEach((card) => {
                let isDragging = false;
                let startX, startY;
                let initialLeft, initialTop;

                function bringToFront() {
                    maxZIndex++;
                    card.style.zIndex = maxZIndex;
                }

                card.addEventListener("mousedown", (e) => {
                    isDragging = true;
                    bringToFront();
                    card.style.cursor = "grabbing";

                    startX = e.clientX;
                    startY = e.clientY;
                    initialLeft = card.offsetLeft;
                    initialTop = card.offsetTop;
                });

                document.addEventListener("mousemove", (e) => {
                    if (!isDragging) return;
                    const deltaX = e.clientX - startX;
                    const deltaY = e.clientY - startY;
                    let newLeft = initialLeft + deltaX;
                    let newTop = initialTop + deltaY;
                    const containerRect = container.getBoundingClientRect();
                    const cardRect = card.getBoundingClientRect();
                    newLeft = Math.max(0, newLeft);
                    newLeft = Math.min(containerRect.width - cardRect.width, newLeft);
                    newTop = Math.max(0, newTop);
                    newTop = Math.min(containerRect.height - cardRect.height, newTop);
                    card.style.left = `${newLeft}px`;
                    card.style.top = `${newTop}px`;
                });

                document.addEventListener("mouseup", () => {
                    isDragging = false;
                    card.style.cursor = "grab";
                });
            });

            // Gallery functionality
            const galleryModal = document.getElementById('galleryModal');
            const closeButton = document.querySelector('.close-button');
            const prevArrow = document.querySelector('.prev-arrow');
            const nextArrow = document.querySelector('.next-arrow');
            const galleryImageWrappers = document.querySelectorAll('.image-wrapper, .image-centrale .image-wrapper');
            let currentImageIndex = -1;
            const body = document.body;
            const modalCanvas = document.getElementById('modalCanvas');

            function drawImageOnCanvas(canvasElement, imageSrc) {
                const img = new Image();
                img.onload = function() {
                    const ctx = canvasElement.getContext('2d');
                    ctx.clearRect(0, 0, canvasElement.width, canvasElement.height);
                    let width = img.naturalWidth;
                    let height = img.naturalHeight;
                    let targetWidth, targetHeight;
                    if (canvasElement.id === 'modalCanvas') {
                        targetWidth = window.innerWidth * 0.9;
                        targetHeight = window.innerHeight * 0.9;
                    } else {
                        const parent = canvasElement.parentElement;
                        targetWidth = parent.offsetWidth;
                        targetHeight = parent.offsetHeight;
                    }
                    const aspectRatio = width / height;
                    const targetAspectRatio = targetWidth / targetHeight;
                    if (aspectRatio > targetAspectRatio) {
                        width = targetWidth;
                        height = width / aspectRatio;
                    } else {
                        height = targetHeight;
                        width = height * aspectRatio;
                    }
                    canvasElement.width = width * 5;
                    canvasElement.height = height * 5;
                    ctx.drawImage(img, 0, 0, width * 5, height * 5);
                };
                img.src = imageSrc;
            }

            function loadAndDrawAllGalleryImages() {
                galleryImageWrappers.forEach(wrapper => {
                    const imageSrc = wrapper.dataset.src;
                    const canvasElement = wrapper.querySelector('.gallery-image-canvas');
                    if (imageSrc && canvasElement) {
                        drawImageOnCanvas(canvasElement, imageSrc);
                    }
                });
            }

            function openModal(imageSrc) {
                galleryModal.style.display = 'flex';
                drawImageOnCanvas(modalCanvas, imageSrc);
                body.style.overflow = 'hidden';

                setTimeout(() => {
                    modalCanvas.style.opacity = 1;
                    modalCanvas.style.transform = 'scale(1)';
                }, 50);
            }

            function closeModal() {
                modalCanvas.style.opacity = 0;
                modalCanvas.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    galleryModal.style.display = 'none';
                    body.style.overflow = 'auto';
                }, 300);
            }

            function showPrevImage() {
                modalCanvas.style.transform = 'translateX(100%)';
                modalCanvas.style.opacity = 0;
                setTimeout(() => {
                    currentImageIndex = (currentImageIndex - 1 + galleryImageWrappers.length) % galleryImageWrappers.length;
                    const imageSrc = galleryImageWrappers[currentImageIndex].dataset.src;
                    drawImageOnCanvas(modalCanvas, imageSrc);
                    modalCanvas.style.transition = 'none';
                    modalCanvas.style.transform = 'translateX(-100%)';
                    setTimeout(() => {
                        modalCanvas.style.transition = 'transform 0.5s ease-in-out, opacity 0.5s ease-in-out';
                        modalCanvas.style.transform = 'translateX(0)';
                        modalCanvas.style.opacity = 1;
                    }, 20);
                }, 500);
            }

            function showNextImage() {
                modalCanvas.style.transform = 'translateX(-100%)';
                modalCanvas.style.opacity = 0;
                setTimeout(() => {
                    currentImageIndex = (currentImageIndex + 1) % galleryImageWrappers.length;
                    const imageSrc = galleryImageWrappers[currentImageIndex].dataset.src;
                    drawImageOnCanvas(modalCanvas, imageSrc);
                    modalCanvas.style.transition = 'none';
                    modalCanvas.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        modalCanvas.style.transition = 'transform 0.5s ease-in-out, opacity 0.5s ease-in-out';
                        modalCanvas.style.transform = 'translateX(0)';
                        modalCanvas.style.opacity = 1;
                    }, 20);
                }, 500);
            }

            // Initialize gallery
            loadAndDrawAllGalleryImages();
            galleryImageWrappers.forEach((wrapper, index) => {
                wrapper.addEventListener('click', () => {
                    currentImageIndex = index;
                    const imageSrc = wrapper.dataset.src;
                    openModal(imageSrc);
                });
            });

            closeButton.addEventListener('click', (e) => {
                e.stopPropagation();
                closeModal();
            });

            prevArrow.addEventListener('click', (e) => {
                e.stopPropagation();
                showPrevImage();
            });

            nextArrow.addEventListener('click', (e) => {
                e.stopPropagation();
                showNextImage();
            });

            galleryModal.addEventListener('click', (e) => {
                if (e.target === galleryModal) {
                    closeModal();
                }
            });

            // Gallery image animations
            const allImageWrappers = document.querySelectorAll('.image-wrapper');
            const centralImageWrapper = document.querySelector('.image-centrale');
            const galleryImageWrappersForAnimation = Array.from(allImageWrappers).filter(wrapper => wrapper.closest('.image-centrale') === null);

            galleryImageWrappersForAnimation.forEach((wrapper) => {
                gsap.to(wrapper, {
                    opacity: 1,
                    y: 0,
                    duration: 0.8,
                    ease: "power2.out",
                    scrollTrigger: {
                        trigger: wrapper,
                        start: "top 80%",
                        toggleActions: "play none none none"
                    }
                });
            });

            if (centralImageWrapper) {
                gsap.from(centralImageWrapper, {
                    opacity: 0,
                    scale: 0.8,
                    y: 50,
                    duration: 1.5,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: centralImageWrapper,
                        start: "top 85%",
                        toggleActions: "play none none none"
                    }
                });
            }

            // Navbar functionality
            const navbarToggle = document.querySelector('.navbar-toggle');
            const navbarMenu = document.querySelector('.navbar-menu');

            navbarToggle.addEventListener('click', () => {
                navbarToggle.classList.toggle('active');
                navbarMenu.classList.toggle('active');
                body.classList.toggle('menu-active');
            });

            // Intersection observer for image wrappers
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    } else {
                        entry.target.classList.remove('visible');
                    }
                });
            }, {});
            
            const todoelements = document.querySelectorAll('.image-wrapper');
            todoelements.forEach((element) => {
                observer.observe(element);
            });
        }
    </script>
    
    <script src="../../js/finisher-header.es5.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        new FinisherHeader({
            "count": 100,
            "size": {
                "min": 2,
                "max": 8,
                "pulse": 0
            },
            "speed": {
                "x": {
                    "min": 0,
                    "max": 0.4
                },
                "y": {
                    "min": 0,
                    "max": 0.6
                }
            },
            "colors": {
                "background": "#000000",
                "particles": [
                    "#fbfcca",
                    "#d7f3fe",
                    "#ffd0a7"
                ]
            },
            "blending": "overlay",
            "opacity": {
                "center": 1,
                "edge": 0
            },
            "skew": -2,
            "shapes": [
                "c"
            ]
        });
    </script>
</body>
</html>